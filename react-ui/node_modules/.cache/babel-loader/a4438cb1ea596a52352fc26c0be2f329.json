{"ast":null,"code":"import _classCallCheck from \"/Users/sanky/slacts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/sanky/slacts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/sanky/slacts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/sanky/slacts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/sanky/slacts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/sanky/slacts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/sanky/slacts/src/components/login/login.js\";\nimport React, { Component } from 'react';\nimport './login.css';\nimport postDataService from './../../dataservice/posts-service.js';\nimport { Form, Button, Alert } from 'react-bootstrap';\n\nvar sha1 = require('sha1');\n\nvar LoginComp =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(LoginComp, _Component);\n\n  function LoginComp(props, context) {\n    var _this;\n\n    _classCallCheck(this, LoginComp);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(LoginComp).call(this, props, context));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeUname = _this.onChangeUname.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangePassword = _this.onChangePassword.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      show: false,\n      uname: '',\n      password: '',\n      alertText: '',\n      alertType: 'danger',\n      alertShow: false,\n      isLoading: false\n    };\n    return _this;\n  }\n\n  _createClass(LoginComp, [{\n    key: \"onSubmit\",\n    value: function onSubmit() {\n      var _this2 = this;\n\n      this.setState({\n        isLoading: true\n      });\n      postDataService.login({\n        username: this.state.uname,\n        password: sha1(this.state.password)\n      }, function (resp) {\n        if (resp[\"message\"] === \"Valid sign in\") {\n          _this2.props.onLogin({\n            username: _this2.state.uname,\n            token: resp.token\n          }); //alert(\"Successfully logged in.\");\n\n\n          _this2.setState({\n            alertText: 'Successfully logged in',\n            alertShow: true,\n            alertType: 'success',\n            isLoading: false\n          });\n        } else if (resp[\"message\"] === \"Error: Invalid\") {\n          //alert(\"Please enter correct username.\")\n          _this2.setState({\n            alertText: 'Please enter correct username.',\n            alertShow: true,\n            alertType: 'danger',\n            isLoading: false\n          });\n        } else {\n          //alert(resp[\"message\"])\n          _this2.setState({\n            alertText: 'Enter correct username.',\n            alertShow: true,\n            alertType: 'danger',\n            isLoading: false\n          });\n        }\n\n        document.cookie = 'token=' + resp.token;\n      });\n    }\n  }, {\n    key: \"onChangeUname\",\n    value: function onChangeUname(event) {\n      return this.setState({\n        uname: event.currentTarget.value\n      });\n    }\n  }, {\n    key: \"onChangePassword\",\n    value: function onChangePassword(event) {\n      return this.setState({\n        password: event.currentTarget.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var isLoading = this.state.isLoading;\n      return React.createElement(Form, {\n        className: \"form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(Alert, {\n        key: '1fdf',\n        show: this.state.alertShow,\n        variant: this.state.alertType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, this.state.alertText), React.createElement(Form.Group, {\n        controlId: \"formBasicEmailLogin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"User Name\"), React.createElement(Form.Control, {\n        type: \"text\",\n        placeholder: \"Enter User Name\",\n        value: this.state.uname,\n        onChange: this.onChangeUname,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }), React.createElement(Form.Text, {\n        className: \"text-muted\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, \"Ex. John\")), React.createElement(Form.Group, {\n        controlId: \"formBasicPasswordLogin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Form.Control, {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: this.state.password,\n        onChange: this.onChangePassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      })), React.createElement(\"center\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"info\",\n        disabled: isLoading,\n        onClick: !isLoading ? this.onSubmit : null,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, isLoading ? 'Logging in…' : 'Login')));\n    }\n  }]);\n\n  return LoginComp;\n}(Component);\n\nexport default LoginComp;","map":{"version":3,"sources":["/Users/sanky/slacts/src/components/login/login.js"],"names":["React","Component","postDataService","Form","Button","Alert","sha1","require","LoginComp","props","context","onSubmit","bind","onChangeUname","onChangePassword","state","show","uname","password","alertText","alertType","alertShow","isLoading","setState","login","username","resp","onLogin","token","document","cookie","event","currentTarget","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport './login.css';\n\nimport postDataService from './../../dataservice/posts-service.js'\n\nimport {\n    Form,\n    Button,\n    Alert,\n} from 'react-bootstrap';\n\nvar sha1 = require('sha1');\n\nclass LoginComp extends Component {\n    constructor(props, context) {\n        super(props, context);\n\n        this.onSubmit = this.onSubmit.bind(this);\n\n        this.onChangeUname = this.onChangeUname.bind(this);\n\n        this.onChangePassword = this.onChangePassword.bind(this);\n\n\n        this.state = {\n            show: false,\n            uname: '',\n            password: '',\n            alertText: '',\n            alertType: 'danger',\n            alertShow: false,\n            isLoading: false,\n        }\n    }\n\n    onSubmit() {\n        this.setState({ isLoading: true });\n        postDataService.login({\n            username: this.state.uname,\n            password: sha1(this.state.password),\n            },\n            (resp) => {\n                if(resp[\"message\"] === \"Valid sign in\") {\n                    this.props.onLogin({\n                        username: this.state.uname,\n                        token: resp.token,\n                    });\n                    //alert(\"Successfully logged in.\");\n                    this.setState({\n                        alertText : 'Successfully logged in',\n                        alertShow: true,\n                        alertType: 'success',\n                        isLoading: false,\n                    });\n\n                }\n\n                else if(resp[\"message\"] === \"Error: Invalid\") {\n                    //alert(\"Please enter correct username.\")\n                    this.setState({\n                      alertText : 'Please enter correct username.',\n                      alertShow: true,\n                      alertType: 'danger',\n                      isLoading: false,\n                    });\n                }\n                else {\n                    //alert(resp[\"message\"])\n                    this.setState({\n                      alertText : 'Enter correct username.',\n                      alertShow: true,\n                      alertType: 'danger',\n                      isLoading: false,\n                    });\n                }\n                document.cookie = 'token=' + resp.token;\n            });\n    }\n\n    onChangeUname(event) {\n\n        return this.setState({\n            uname: event.currentTarget.value,\n        });\n    }\n\n    onChangePassword(event) {\n\n        return this.setState({\n            password: event.currentTarget.value,\n        });\n    }\n\n    render() {\n      const { isLoading } = this.state;\n        return (\n            <Form className='form'>\n                <Alert key={'1fdf'} show={this.state.alertShow} variant={this.state.alertType}>\n                  {this.state.alertText}\n                </Alert>\n                <Form.Group controlId=\"formBasicEmailLogin\">\n                <Form.Label>User Name</Form.Label>\n                <Form.Control type=\"text\" placeholder=\"Enter User Name\" value={this.state.uname} onChange={this.onChangeUname}/>\n                <Form.Text className=\"text-muted\">\n                    Ex. John\n                </Form.Text>\n                </Form.Group>\n\n                <Form.Group controlId=\"formBasicPasswordLogin\">\n                    <Form.Label>Password</Form.Label>\n                    <Form.Control type=\"password\" placeholder=\"Password\" value={this.state.password} onChange={this.onChangePassword}/>\n                </Form.Group>\n                <center>\n                <Button\n                variant=\"info\"\n                disabled={isLoading}\n                onClick={!isLoading ? this.onSubmit : null}\n                >\n                {isLoading ? 'Logging in…' : 'Login'}\n                </Button>\n\n                </center>\n            </Form>\n        );\n    }\n}\n\nexport default LoginComp;\n"]},"metadata":{},"sourceType":"module"}